# モニタープログラム
## Universal Monitor
- [Universal Monitor](https://electrelic.com/electrelic/node/1317)が既にIM6100に対応していたため，それを流用させていただきました．
- Control Panelメモリ空間(CP空間)ではindirect addressingによるメモリアクセスはメインメモリ空間へのアクセスとなるため，文字列バッファ等へのアクセスがCP空間になるようにするための修正を行いました．
- [tools/unimon](../tools/unimon)が修正後のソースです．
- コンテキストの保存，復帰，拡張メモリ空間が未対応なので，これから実装します．

### 使い方
- CPREQ スイッチを押すとCP割り込みによって起動します．PCはCP空間の0番地に保存されます．
- コマンドはD, S, L, Gが実装されています．
  - D, S, Lはメインメモリに対する読み書きです．
  - G はCP割り込み状態を終了してメインメモリ空間に戻ります．引数が無い場合は0番地に保存されているアドレスに復帰します．
- CP割り込み中は常にRUN状態なので，Gしてメインメモリ空間に戻ったときに動かないのはHALTになってるのが原因なことがあります．その場合はCONTスイッチを押してRUNにします．

OS/8のrebootの例
```
Universal Monitor IM6100 (Control Panel)
7777
] S23
0023 : 0200 6007
0024 : 1200 6744
0025 : 0211 1032
0026 : 7607 6746
0027 : 5372 6743
0030 : 6203 1032
0031 : 0321 5031
0032 : 1630 0000
0033 : 0402 .
] d20
0020 : 0000 0000 7700 6007 6744 1032 6746 6743
0030 : 1032 5031 0000 0402 0215 4562 0610 0000
0040 : 0013 7610 5046 3445 5001 7777 6203 5450
0050 : 1005 1664 6544 7605 4000 3700 2020 0070
0060 : 0603 0600 0434 0067 6003 0244 0100 0336
0070 : 0334 7001 6670 0212 0215 0403 0010 7700
0100 : 0330 0306 0564 1754 0527 0300 1676 7404
0110 : 7600 7402 7401 7403 1610 7400 0526 0200
] g23

.
```
